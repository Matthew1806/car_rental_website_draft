{% extends 'base.html' %}

{% block title %}Manage Bookings - Rent A Car{% endblock %}

{% block content %}
<div class="admin-bookings-container">
    <div class="bookings-page-header">
        <h1>Manage Bookings</h1>
        <p>View and manage all car rental bookings.</p>
    </div>

    {% if bookings %}
    <div class="bookings-table-container">
        <table class="adminbookings-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Car</th>
                    <th>Pickup Date</th>
                    <th>Return Date</th>
                    <th>Status</th>
                    <th>Submitted At</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for booking in bookings %}
                <tr>
                    <td data-label="ID">{{ booking.id }}</td>
                    <td data-label="Name">
                        {{ booking.name }}<br>
                        <small>{{ booking.email }}</small>
                    </td>
                    <td data-label="Car">{{ booking.car.name }}</td>
                    <td data-label="Pickup Date">{{ booking.pickup_date.strftime('%Y-%m-%d') }}</td>
                    <td data-label="Return Date">{{ booking.return_date.strftime('%Y-%m-%d') }}</td>
                    <td data-label="Status">
                        <span class="adminbookings-status-badge adminbookings-status-{{ booking.status.lower() }}">
                            {{ booking.status }}
                        </span>
                    </td>
                    <td data-label="Submitted At">{{ booking.submitted_at.strftime('%Y-%m-%d %H:%M') }}</td>
                    <td data-label="Actions">
                        <a href="{{ url_for('admin_booking_details', booking_id=booking.id) }}" class="adminbookings-action-btn adminbookings-btn-edit">
                            Edit
                        </a>
                        <form method="POST" action="{{ url_for('admin_delete_booking', booking_id=booking.id) }}" class="adminbookings-inline-form" onsubmit="return confirm('Are you sure you want to delete this booking?')">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                            <button type="submit" class="adminbookings-action-btn adminbookings-btn-delete">
                                Delete
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="adminbookings-back-link">
        <a href="{{ url_for('admin_dashboard') }}">Back to Dashboard</a>
    </div>
    {% else %}
    <div class="empty-bookings">
        <p>No bookings found.</p>
    </div>
    <div class="adminbookings-back-link">
        <a href="{{ url_for('admin_dashboard') }}">Back to Dashboard</a>
    </div>
    {% endif %}
</div>
{% endblock %}
